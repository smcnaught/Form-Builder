<h1>Form Builder</h1>

<table mat-table [dataSource]="formData" class="mat-elevation-z8">
  <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns; let colIndex = index;">
    <td
      mat-cell
      *matCellDef="let element; let rowIndex = index;"
    >
      <div
        class="above-droppable"
        (dragover)="onDragOver($event, rowIndex, colIndex)"
        (dragend)="onDragLeave($event)"
        (drop)="onDrop($event)"
      ></div>
      

      <div>
        <div
          class="left-droppable"
          (dragover)="onDragOver($event, rowIndex, colIndex - 1 > 0 ? colIndex : 0)"
          (dragend)="onDragLeave($event)"
          (drop)="onDrop($event)"
        ></div>

        <div
          class="draggable-element"
          draggable="true"
          (dragstart)="onDragStart($event, colIndex, rowIndex)"
          >
          {{ element[column] }}
        </div>

        <div
          class="right-droppable"
          (dragover)="onDragOver($event, rowIndex, colIndex + 1)"
          (dragend)="onDragLeave($event)"
          (drop)="onDrop($event)"
        ></div>

      </div>

      <div
        class="below-droppable"
        (dragover)="onDragOver($event, rowIndex + 1, colIndex)"
        (dragend)="onDragLeave($event)"
        (drop)="onDrop($event)"
      ></div>

    </td>
  </ng-container>

  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>