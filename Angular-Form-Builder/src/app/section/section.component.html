<h1>Form Builder</h1>

<table mat-table [dataSource]="formData" class="mat-elevation-z8">
  <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns; let colIndex = index;">
    
    <td
      mat-cell
      *matCellDef="let element; let rowIndex = index;"
    >

      <div *ngIf="element[column].type > 0">
      
        <div
          class="above-droppable"
          (dragover)="onDragOver($event, rowIndex, colIndex)"
          (dragend)="onDragLeave($event)"
          (drop)="onDrop()"
        ></div>

        <div>
          <div
            class="left-droppable"
            (dragover)="onDragOver($event, rowIndex, colIndex - 1 > 0 ? colIndex : 0)"
            (dragend)="onDragLeave($event)"
            (drop)="onDrop()"
          ></div>

          <div
            class="draggable-element"
            draggable="true"
            (dragstart)="onDragStart($event, colIndex, rowIndex)"
            (click)="selectItem(element[column], colIndex, rowIndex)" 
            >
            <span *ngIf="element[column].type === draggedElementEnum.text">
              <label for="test">
                <input [value]='element[column].name'/>
              </label>
              <input
                id="test"
                type='text'
                placeholder='change me'
                class='input-field'
                [value]='element[column].value' />
            </span>
          </div>

          <div
            class="right-droppable"
            (dragover)="onDragOver($event, rowIndex, colIndex + 1)"
            (dragend)="onDragLeave($event)"
            (drop)="onDrop()"
          ></div>

        </div>

        <div
          class="below-droppable"
          (dragover)="onDragOver($event, rowIndex + 1, colIndex)"
          (dragend)="onDragLeave($event)"
          (drop)="onDrop()"
        ></div>
      
      </div>

    </td>
  </ng-container>

  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>